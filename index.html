<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easier CUSUM Control Charts â€¢ cusumcharter</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easier CUSUM Control Charts">
<meta property="og:description" content="Create CUSUM (cumulative sum) statistics from a vector or dataframe. Also create single or faceted CUSUM control charts, with or without control limits. Accepts vector, dataframe, tibble or data.table inputs.">
<meta property="og:image" content="https://johnmackintosh.github.io/cusumcharter/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cusumcharter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/cusumcharter.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnmackintosh/cusumcharter/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="cusumcharter-">cusumcharter <img src="reference/figures/logo.png" width="160px" align="right"><a class="anchor" aria-label="anchor" href="#cusumcharter-"></a>
</h1></div>
<!-- badges: start -->







<!-- badges: end -->
<p>The goal of cusumcharter is to create both simple CUSUM charts, with and without control limits from a vector, or to create multiple CUSUM charts, with or without control limits, from a grouped dataframe, tibble or data.table.</p>
<p>CUSUM charts detect small changes over time, and will alert quicker than a Statistical Process Control chart. They are an excellent alternative to run and control charts, particularly where data is scarce, infrequent, or expensive to obtain.</p>
<p>They monitor the difference between each data point, relative to a target value, which is often the mean of all the currently available data points. Using these variances and targets, control limits are calculated. Any points outside these limits are an indication that the process is out of control.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the latest stable version from CRAN :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cusumcharter"</span><span class="op">)</span></span></code></pre></div>
<p>Install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"johnmackintosh/cusumcharter"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-simple-cusum-calculation">A Simple CUSUM calculation<a class="anchor" aria-label="anchor" href="#a-simple-cusum-calculation"></a>
</h2>
<p>This returns the CUSUM statistics for a single vector, centred on a supplied target value:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/johnmackintosh/cusumcharter" class="external-link">cusumcharter</a></span><span class="op">)</span></span>
<span><span class="va">test_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.175</span>, <span class="fl">0.152</span>, <span class="fl">0.15</span>, <span class="fl">0.207</span>, <span class="fl">0.136</span>, <span class="fl">0.212</span>, <span class="fl">0.166</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cusum_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_single.html">cusum_single</a></span><span class="op">(</span><span class="va">test_vec</span>, target <span class="op">=</span> <span class="fl">0.16</span><span class="op">)</span></span>
<span><span class="va">cusum_res</span></span>
<span><span class="co">#&gt; [1] 0.175 0.167 0.157 0.204 0.180 0.232 0.238</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="expanded-outputs-with-cusum_single_df">Expanded outputs with cusum_single_df<a class="anchor" aria-label="anchor" href="#expanded-outputs-with-cusum_single_df"></a>
</h2>
<p>This function takes a single vector as input and returns a data.frame with additional information used to calculate the CUSUM statistic</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.175</span>, <span class="fl">0.152</span>, <span class="fl">0.15</span>, <span class="fl">0.207</span>, <span class="fl">0.136</span>, <span class="fl">0.212</span>, <span class="fl">0.166</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/cusum_single_df.html">cusum_single_df</a></span><span class="op">(</span><span class="va">test_vec2</span>, target <span class="op">=</span> <span class="fl">0.16</span><span class="op">)</span></span>
<span><span class="co">#&gt;       x target     si cusumx cusum_target</span></span>
<span><span class="co">#&gt; 1 0.175   0.16  0.015  0.015        0.175</span></span>
<span><span class="co">#&gt; 2 0.152   0.16 -0.008  0.007        0.167</span></span>
<span><span class="co">#&gt; 3 0.150   0.16 -0.010 -0.003        0.157</span></span>
<span><span class="co">#&gt; 4 0.207   0.16  0.047  0.044        0.204</span></span>
<span><span class="co">#&gt; 5 0.136   0.16 -0.024  0.020        0.180</span></span>
<span><span class="co">#&gt; 6 0.212   0.16  0.052  0.072        0.232</span></span>
<span><span class="co">#&gt; 7 0.166   0.16  0.006  0.078        0.238</span></span></code></pre></div>
<p>Here we donâ€™t supply a target, so the mean is used</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_vec3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">11</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/cusum_single_df.html">cusum_single_df</a></span><span class="op">(</span><span class="va">test_vec3</span><span class="op">)</span></span>
<span><span class="co">#&gt;     x target si cusumx cusum_target</span></span>
<span><span class="co">#&gt; 1   1      4 -3     -3            1</span></span>
<span><span class="co">#&gt; 2   1      4 -3     -6           -2</span></span>
<span><span class="co">#&gt; 3   2      4 -2     -8           -4</span></span>
<span><span class="co">#&gt; 4  11      4  7     -1            3</span></span>
<span><span class="co">#&gt; 5   3      4 -1     -2            2</span></span>
<span><span class="co">#&gt; 6   5      4  1     -1            3</span></span>
<span><span class="co">#&gt; 7   7      4  3      2            6</span></span>
<span><span class="co">#&gt; 8   2      4 -2      0            4</span></span>
<span><span class="co">#&gt; 9   4      4  0      0            4</span></span>
<span><span class="co">#&gt; 10  3      4 -1     -1            3</span></span>
<span><span class="co">#&gt; 11  5      4  1      0            4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cusum-control-limits">CUSUM control limits<a class="anchor" aria-label="anchor" href="#cusum-control-limits"></a>
</h2>
<p>Two additional functions allow you to calculate control limits from a single vector and plot a CUSUM chart with control limits. As before, the mean is used to determine the target if none is provided. Alternate functions are available if you wish to use the median instead.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_vec3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">11</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_control.html">cusum_control</a></span><span class="op">(</span><span class="va">test_vec3</span>, target <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">controls</span></span>
<span><span class="co">#&gt;     x target variance std_dev cusum      cplus      cneg cum_nplus cum_nneg</span></span>
<span><span class="co">#&gt; 1   1      4       -3 1.77305    -3  0.0000000 -2.113475         0        1</span></span>
<span><span class="co">#&gt; 2   1      4       -3 1.77305    -6  0.0000000 -4.226950         0        2</span></span>
<span><span class="co">#&gt; 3   2      4       -2 1.77305    -8  0.0000000 -5.340426         0        3</span></span>
<span><span class="co">#&gt; 4   3      4       -1 1.77305    -9  0.0000000 -5.453901         0        4</span></span>
<span><span class="co">#&gt; 5   5      4        1 1.77305    -8  0.1134752 -3.567376         1        5</span></span>
<span><span class="co">#&gt; 6   7      4        3 1.77305    -5  2.2269504  0.000000         2        0</span></span>
<span><span class="co">#&gt; 7  11      4        7 1.77305     2  8.3404255  0.000000         3        0</span></span>
<span><span class="co">#&gt; 8   7      4        3 1.77305     5 10.4539007  0.000000         4        0</span></span>
<span><span class="co">#&gt; 9   5      4        1 1.77305     6 10.5673759  0.000000         5        0</span></span>
<span><span class="co">#&gt; 10  7      4        3 1.77305     9 12.6808511  0.000000         6        0</span></span>
<span><span class="co">#&gt; 11  8      4        4 1.77305    13 15.7943262  0.000000         7        0</span></span>
<span><span class="co">#&gt; 12  9      4        5 1.77305    18 19.9078014  0.000000         8        0</span></span>
<span><span class="co">#&gt; 13  5      4        1 1.77305    19 20.0212766  0.000000         9        0</span></span>
<span><span class="co">#&gt;         ucl       lcl centre obs</span></span>
<span><span class="co">#&gt; 1  7.092199 -7.092199      0   1</span></span>
<span><span class="co">#&gt; 2  7.092199 -7.092199      0   2</span></span>
<span><span class="co">#&gt; 3  7.092199 -7.092199      0   3</span></span>
<span><span class="co">#&gt; 4  7.092199 -7.092199      0   4</span></span>
<span><span class="co">#&gt; 5  7.092199 -7.092199      0   5</span></span>
<span><span class="co">#&gt; 6  7.092199 -7.092199      0   6</span></span>
<span><span class="co">#&gt; 7  7.092199 -7.092199      0   7</span></span>
<span><span class="co">#&gt; 8  7.092199 -7.092199      0   8</span></span>
<span><span class="co">#&gt; 9  7.092199 -7.092199      0   9</span></span>
<span><span class="co">#&gt; 10 7.092199 -7.092199      0  10</span></span>
<span><span class="co">#&gt; 11 7.092199 -7.092199      0  11</span></span>
<span><span class="co">#&gt; 12 7.092199 -7.092199      0  12</span></span>
<span><span class="co">#&gt; 13 7.092199 -7.092199      0  13</span></span></code></pre></div>
<p>Also see the <code>cusum_control_median</code> function</p>
</div>
<div class="section level2">
<h2 id="cusum-control-chart">CUSUM Control Chart<a class="anchor" aria-label="anchor" href="#cusum-control-chart"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_vec3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">11</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_control.html">cusum_control</a></span><span class="op">(</span><span class="va">test_vec3</span>, target <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/cusum_control_plot.html">cusum_control_plot</a></span><span class="op">(</span><span class="va">controls</span>, </span>
<span>                   xvar <span class="op">=</span> <span class="va">obs</span>, </span>
<span>                   title_text <span class="op">=</span> <span class="st">"CUSUM out of control since 7th observation"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-single-control_chart-1.png"><!-- --></p>
</div>
<div class="section level2">
<h2 id="multiple-cusum-control-charts">Multiple CUSUM Control Charts<a class="anchor" aria-label="anchor" href="#multiple-cusum-control-charts"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/johnmackintosh/cusumcharter" class="external-link">cusumcharter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>,<span class="fl">1L</span>,<span class="fl">3L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,</span>
<span>        <span class="fl">1L</span>,<span class="fl">3L</span>,<span class="fl">2L</span>,<span class="fl">3L</span>,<span class="fl">2L</span>,<span class="fl">7L</span>,<span class="fl">11L</span>,<span class="fl">7L</span>,<span class="fl">9L</span><span class="op">)</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,</span>
<span>           <span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric2"</span>,</span>
<span>           <span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,</span>
<span>           <span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">testres</span> <span class="op">&lt;-</span> <span class="va">testdata</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="reference/cusum_control.html">cusum_control</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_control_plot.html">cusum_control_plot</a></span><span class="op">(</span><span class="va">testres</span>, </span>
<span>                        xvar <span class="op">=</span> <span class="va">obs</span>, </span>
<span>                        facet_var <span class="op">=</span> <span class="va">metric</span>, </span>
<span>                        title_text <span class="op">=</span> <span class="st">"Faceted CUSUM Control plots"</span><span class="op">)</span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="reference/figures/README-faceted_chart1-1.png"><!-- --></p>
</div>
<div class="section level2">
<h2 id="flexible-x-axis">Flexible x axis<a class="anchor" aria-label="anchor" href="#flexible-x-axis"></a>
</h2>
<p>Here we add a date column, specify that the <code>scale_type</code> is <code>'date'</code>, and provide the <code>datebreaks</code> argument to plot our data over time</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/johnmackintosh/cusumcharter" class="external-link">cusumcharter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span> N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>,<span class="fl">1L</span>,<span class="fl">3L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,</span>
<span>        <span class="fl">1L</span>,<span class="fl">3L</span>,<span class="fl">2L</span>,<span class="fl">3L</span>,<span class="fl">2L</span>,<span class="fl">7L</span>,<span class="fl">11L</span>,<span class="fl">7L</span>,<span class="fl">9L</span><span class="op">)</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,</span>
<span>           <span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric2"</span>,</span>
<span>           <span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,</span>
<span>           <span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datecol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-01"</span>,<span class="st">"2021-01-02"</span>, <span class="st">"2021-01-03"</span>, <span class="st">"2021-01-04"</span> ,</span>
<span>             <span class="st">"2021-01-05"</span>, <span class="st">"2021-01-06"</span>,<span class="st">"2021-01-07"</span>, <span class="st">"2021-01-08"</span>, </span>
<span>             <span class="st">"2021-01-09"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">testres</span> <span class="op">&lt;-</span> <span class="va">testdata</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="reference/cusum_control.html">cusum_control</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>report_date <span class="op">=</span> <span class="va">datecol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_control_plot.html">cusum_control_plot</a></span><span class="op">(</span><span class="va">testres</span>, </span>
<span>                         xvar <span class="op">=</span> <span class="va">report_date</span>,</span>
<span>                         facet_var <span class="op">=</span> <span class="va">metric</span>, </span>
<span>                         title_text <span class="op">=</span> <span class="st">"Faceted plots with date axis"</span>, </span>
<span>                         scale_type <span class="op">=</span> <span class="st">"date"</span>, </span>
<span>                         datebreaks <span class="op">=</span> <span class="st">'4 days'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                                                              hjust <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                                                              vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p2</span></span></code></pre></div>
<p><img src="reference/figures/README-faceted_chart2-1.png"><!-- --></p>
</div>
<div class="section level2">
<h2 id="highlight-above-and-below-control-limits">Highlight above and below control limits<a class="anchor" aria-label="anchor" href="#highlight-above-and-below-control-limits"></a>
</h2>
<p>Points outside the Upper Control Limit are always highlighted. Use the <code>show_below</code> option to enable highlighting points below the Lower Control Limit</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/johnmackintosh/cusumcharter" class="external-link">cusumcharter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">15L</span>,<span class="fl">2L</span>,<span class="op">-</span><span class="fl">11L</span>,<span class="fl">3L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="op">-</span><span class="fl">11L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,</span>
<span><span class="fl">2L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">1L</span>,<span class="fl">10L</span>,<span class="fl">7L</span>,<span class="fl">9L</span>,<span class="fl">11L</span>,<span class="fl">9L</span><span class="op">)</span>,</span>
<span>metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,</span>
<span><span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric1"</span>,<span class="st">"metric2"</span>,</span>
<span><span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span>,</span>
<span><span class="st">"metric2"</span>,<span class="st">"metric2"</span>,<span class="st">"metric2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datecol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-01"</span>,<span class="st">"2021-01-02"</span>, <span class="st">"2021-01-03"</span>, <span class="st">"2021-01-04"</span> ,</span>
<span>             <span class="st">"2021-01-05"</span>, <span class="st">"2021-01-06"</span>,<span class="st">"2021-01-07"</span>, <span class="st">"2021-01-08"</span>,</span>
<span>             <span class="st">"2021-01-09"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">testres</span> <span class="op">&lt;-</span> <span class="va">testdata</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="reference/cusum_control.html">cusum_control</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>report_date <span class="op">=</span> <span class="va">datecol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span><span class="co">#&gt; no target value supplied, so using the mean of x</span></span>
<span></span>
<span></span>
<span><span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cusum_control_plot.html">cusum_control_plot</a></span><span class="op">(</span><span class="va">testres</span>,</span>
<span>                         xvar <span class="op">=</span> <span class="va">report_date</span>,</span>
<span>                         show_below <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         facet_var <span class="op">=</span> <span class="va">metric</span>,</span>
<span>                         title_text <span class="op">=</span> <span class="st">"Highlights above and below control limits"</span><span class="op">)</span></span>
<span><span class="va">p5</span></span></code></pre></div>
<p><img src="reference/figures/README-highlightbelow-1.png"><!-- --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=cusumcharter" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/johnmackintosh/cusumcharter/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/johnmackintosh/cusumcharter/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cusumcharter</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>John MacKintosh <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/johnmackintosh/cusumcharter/actions" class="external-link"><img src="https://github.com/johnmackintosh/cusumcharter/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/johnmackintosh/cusumcharter?branch=master" class="external-link"><img src="https://codecov.io/gh/johnmackintosh/cusumcharter/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/johnmackintosh/cusumcharter/actions/workflows/render-readme.yaml" class="external-link"><img src="https://github.com/johnmackintosh/cusumcharter/actions/workflows/render-readme.yaml/badge.svg" alt="Render README"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://CRAN.R-project.org/package=cusumcharter" class="external-link"><img src="https://www.r-pkg.org/badges/version/cusumcharter" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=cusumcharter" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/cusumcharter" alt="CRAN Downloads"></a></li>
<li><a href="https://cran.r-project.org/package=cusumcharter" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/cusumcharter" alt="Total Downloads"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by John MacKintosh.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
